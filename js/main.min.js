var button=document.querySelector(".button-form-popup"),popup=document.querySelector(".popup"),close=popup.querySelector(".close-button"),form=popup.querySelector("form"),login=popup.querySelector("[name=name]"),mail=popup.querySelector("[name=mail]"),comment=popup.querySelector("[name=text]"),isStorageSupport=!0,storageLogin="",storageMail="";try{storageLogin=localStorage.getItem("login"),storageMail=localStorage.getItem("mail")}catch(err){isStorageSupport=!1}button.addEventListener("click",function(o){o.preventDefault(),popup.classList.add("popup-show"),login.focus(),storageLogin&&(login.value=storageLogin,mail.focus()),storageMail&&(mail.value=storageMail,comment.focus())}),close.addEventListener("click",function(o){o.preventDefault(),popup.classList.remove("popup-show"),popup.classList.remove("popup-error")}),form.addEventListener("submit",function(o){o.preventDefault(),login.value&&mail.value&&comment.value?(popup.classList.remove("popup-show"),comment.value="",isStorageSupport&&(localStorage.setItem("login",login.value),localStorage.setItem("mail",mail.value))):(popup.classList.remove("popup-error"),popup.offsetWidth,popup.classList.add("popup-error"),console.log("Заполни обязательные поля"))}),window.addEventListener("keydown",function(o){27===o.keyCode&&(o.preventDefault(),popup.classList.contains("popup-show")&&(popup.classList.remove("popup-show"),popup.classList.remove("popup-error")))});